(this["webpackJsonpthunk-front"]=this["webpackJsonpthunk-front"]||[]).push([[0],{30:function(e,t,n){},31:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(17),c=n.n(a),s=(n(30),n(12)),i=n(4),o=(n(31),n(9)),u=n(10),j=n.n(u),b=n(16),l="CHANGE_SERVICE_FIELD",p="FETCH_SERVICES_REQUEST",d="FETCH_SERVICES_SUCCESS",v="FETCH_SERVICES_FAILURE",O="ADD_SERVICE_REQUEST",h="ADD_SERVICE_FAILURE",m="ADD_SERVICE_SUCCESS",f="FETCH_REMOVE_SERVICE",x="FETCH_EDIT_SERVICE",E="CHANGE_EDIT_SERVICE_FIELD",g="EDIT_SERVICE_SUCCESS";var y=function(){return{type:p}},C=function(e){return{type:v,payload:{error:e}}},k=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(y()),e.prev=1,e.next=4,fetch("".concat("https://thunk-back.herokuapp.com/api/services","/").concat(n));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error(r.statusText);case 7:return e.next=9,r.json();case 9:a=e.sent,t({type:x,payload:{item:a}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t(C(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(y()),e.prev=1,e.next=4,fetch("".concat("https://thunk-back.herokuapp.com/api/services","/").concat(n),{method:"DELETE"});case 4:if((r=e.sent).ok){e.next=7;break}throw new Error(r.statusText);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(C(e.t0.message));case 12:_(t);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(y()),e.prev=1,e.next=4,fetch("https://thunk-back.herokuapp.com/api/services");case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:return e.next=9,n.json();case 9:r=e.sent,t({type:d,payload:{items:r}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t(C(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:O,payload:{name:void 0,price:void 0}}),t(y()),e.prev=2,e.next=5,fetch("https://thunk-back.herokuapp.com/api/services",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:if((r=e.sent).ok){e.next=8;break}throw new Error(r.statusText);case 8:t({type:g}),t({type:m}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),t((a=e.t0.message,{type:h,payload:{error:a}})),t(C(e.t0.message));case 16:_(t);case 17:case"end":return e.stop()}var a}),e,null,[[2,12]])})));return function(t,n){return e.apply(this,arguments)}}(),I=(n(39),n(1));var T=function(){return Object(I.jsx)("div",{id:"preloader",children:Object(I.jsx)("div",{id:"loader"})})};n(41);var R=function(){return Object(I.jsxs)("div",{className:"errors-page",children:[Object(I.jsx)("div",{children:"Ooooops!"}),Object(I.jsx)("p",{children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a..."})]})};var D=function(){var e=Object(o.c)((function(e){return e.serviceList})),t=e.items,n=e.loading,a=e.error,c=Object(o.b)();return Object(r.useEffect)((function(){_(c)}),[c]),n?Object(I.jsx)(T,{}):a?Object(I.jsx)(R,{}):Object(I.jsx)("ul",{className:"list",children:t.map((function(e){return Object(I.jsxs)("li",{children:[e.name,": ",e.price,Object(I.jsx)(s.b,{to:"/services/".concat(e.id),children:Object(I.jsx)("button",{className:"edit-btn btn",children:"\u270e"})}),Object(I.jsx)("button",{className:"btn",onClick:function(){return t=e.id,void S(c,t);var t},children:"x"})]},e.id)}))})};var F=function(){var e=Object(o.c)((function(e){return e.serviceAdd})),t=e.item,n=e.loading,r=e.error,a=Object(o.b)(),c=function(e){var t=e.target,n=t.name,r=t.value;a(function(e,t){return{type:l,payload:{name:e,value:t}}}(n,r))};return Object(I.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={name:t.name,price:t.price};w(a,n)},children:[Object(I.jsx)("input",{name:"name",value:t.name,onChange:c}),Object(I.jsx)("input",{name:"price",value:t.price,onChange:c}),Object(I.jsx)("button",{type:"submit",disabled:n,children:"Save"}),r&&Object(I.jsx)(R,{})]})};var V=function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(F,{}),Object(I.jsx)(D,{})]})};var A=function(e){var t=e.match,n=Object(o.c)((function(e){return e.serviceEdit})),a=n.item,c=n.loading,u=n.error,j=n.success,b=Object(o.b)();Object(r.useEffect)((function(){k(b,t.params.id)}),[b,t.params.id]);var l=function(e){var t=e.target,n=t.name,r=t.value;b(function(e,t){return{type:E,payload:{name:e,value:t}}}(n,r))};return j?Object(I.jsx)(i.a,{to:"/"}):c?Object(I.jsx)(T,{}):u?Object(I.jsx)(R,{}):Object(I.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault();var n={id:+t.params.id,name:a.name,price:a.price,content:a.content};w(b,n)},children:[Object(I.jsxs)("label",{children:[Object(I.jsx)("span",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(I.jsx)("input",{name:"name",value:a.name,onChange:l})]}),Object(I.jsxs)("label",{children:[Object(I.jsx)("span",{children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"}),Object(I.jsx)("input",{name:"price",value:a.price,onChange:l})]}),Object(I.jsxs)("label",{children:[Object(I.jsx)("span",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(I.jsx)("textarea",{name:"content",value:a.content,onChange:l})]}),Object(I.jsx)(s.b,{to:"/",children:Object(I.jsx)("button",{type:"button",children:"\u041e\u0442\u043c\u0435\u043d\u0430"})}),Object(I.jsx)("button",{type:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})};var L=function(){return Object(I.jsx)(s.a,{children:Object(I.jsx)("div",{className:"container",children:Object(I.jsxs)(i.d,{children:[Object(I.jsx)(i.b,{path:"/services/:id",component:A}),Object(I.jsx)(i.b,{path:"/services",component:V}),Object(I.jsx)(i.a,{from:"/",to:"/services"})]})})})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},H=n(15),U=n(13),J=n(2),P={item:{name:"",price:""},loading:!1,error:null};var B={item:{id:"",name:"",price:"",content:""},loading:!1,error:null,success:!1};var G={items:[],loading:!1,error:null};var Q=Object(H.b)({serviceList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(J.a)(Object(J.a)({},e),{},{loading:!0,error:null});case v:var n=t.payload.error;return Object(J.a)(Object(J.a)({},e),{},{loading:!1,error:n});case d:var r=t.payload.items;return Object(J.a)(Object(J.a)({},e),{},{items:r,loading:!1,error:null});case f:return Object(J.a)({},G);default:return e}},serviceAdd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:var n=t.payload,r=n.name,a=n.value,c=e.item;return Object(J.a)(Object(J.a)({},e),{},{item:Object(J.a)(Object(J.a)({},c),{},Object(U.a)({},r,a))});case O:return Object(J.a)(Object(J.a)({},e),{},{loading:!0,error:null});case h:var s=t.payload.error;return Object(J.a)(Object(J.a)({},e),{},{loading:!1,error:s});case m:return Object(J.a)({},P);default:return e}},serviceEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:var n=t.payload,r=n.name,a=n.value;return Object(J.a)(Object(J.a)({},e),{},{item:Object(J.a)(Object(J.a)({},e.item),{},Object(U.a)({},r,a))});case x:var c=t.payload.item;return Object(J.a)(Object(J.a)({},e),{},{item:{id:c.id,name:c.name,price:c.price,content:c.content},loading:!1,error:null,success:!1});case v:var s=t.payload.error;return Object(J.a)(Object(J.a)({},e),{},{loading:!1,error:s,success:!1});case p:return Object(J.a)(Object(J.a)({},e),{},{loading:!0,error:null,success:!1});case g:return Object(J.a)(Object(J.a)({},B),{},{success:!0,loading:!1});default:return e}}}),M=Object(H.c)(Q);c.a.render(Object(I.jsx)(o.a,{store:M,children:Object(I.jsx)(L,{})}),document.getElementById("root")),N()}},[[45,1,2]]]);
//# sourceMappingURL=main.ad1549fa.chunk.js.map